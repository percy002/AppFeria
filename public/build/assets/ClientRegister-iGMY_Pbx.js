import{r as d,W as b,j as e,a as F,d as S,y as T}from"./app-CC0jckWs.js";import{G as q}from"./GuestLayout-bpxp5_uy.js";import{I as l}from"./InputError-BmkX-Zc3.js";import{I as n}from"./InputLabel-eACdlZil.js";import{P as E}from"./PrimaryButton-Cwxo4V5C.js";import{T as i}from"./TextInput-BLI9KGSt.js";import{S as g}from"./Toast-CZeBGyVr.js";import{S as h}from"./sweetalert2.all-Bi5WDZWc.js";function B(){const[u,f]=d.useState(),[m,p]=d.useState([]),{data:r,setData:t,post:j,processing:v,errors:o,reset:N}=b({selectedType:"personaJuridica",ruc:"",company_name:"",category_id:"",subCategory_id:"",name:"",last_name:"",dni:"",position:"",phone_number:"",email:"",password:"",password_confirmation:""});d.useEffect(()=>{(()=>{axios.get(route("categorias.all")).then(s=>{const c=s.data;f(c.categorias)}).catch(s=>{console.error(s)})})()},[]);const y=a=>{console.log(a),axios.get(route("categorias.subCategories"),{params:{category_id:a}}).then(s=>{const c=s.data;p(c.subcategorias)}).catch(s=>{console.error(s)})};d.useEffect(()=>{},[]),d.useEffect(()=>()=>{N("password","password_confirmation")},[]);const C=a=>{a.preventDefault(),j(route("client.register"),{data:r,onSuccess:()=>{h.fire({position:"center",icon:"success",title:"Registrado con éxito",showConfirmButton:!1,timer:1500}),T.get("/login")},onError:s=>{let c="";for(let w in s)c+=`${s[w]} `;h.fire("Error",c,"error")}})},x=a=>{const{value:s}=a.target;t({selectedType:s,ruc:"",company_name:"",category_id:"",subCategory_id:"",name:"",last_name:"",dni:"",position:"",phone_number:"",email:"",password:"",password_confirmation:""})},_=a=>{const{value:s}=a.target;if(t("category_id",s),s==="0"){p([]);return}y(s),console.log(m)};return e.jsx("div",{className:"bg-gray-400",children:e.jsxs(q,{type:"register",children:[e.jsx(F,{title:"Registro"}),e.jsxs("form",{onSubmit:C,className:"",children:[e.jsxs("div",{className:"flex justify-around my-2",children:[e.jsxs("div",{className:"",children:[e.jsx("input",{type:"radio",id:"personaJuridica",name:"identificationType",value:"personaJuridica",checked:r.selectedType==="personaJuridica",onChange:x,className:"mx-1"}),e.jsx("label",{htmlFor:"personaJuridica",children:"Persona Juridica"})]}),e.jsxs("div",{className:"",children:[e.jsx("input",{type:"radio",id:"personaNatural",name:"identificationType",value:"personaNatural",checked:r.selectedType==="personaNatural",onChange:x,className:"mx-1"}),e.jsx("label",{htmlFor:"personaNatural",children:"Persona Natural"})]})]}),e.jsxs("div",{className:"flex gap-4 mt-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx(n,{htmlFor:"category_id",value:"Categoría"}),e.jsx("div",{className:`${m&&Array.isArray(m)&&m.length==0?"w-1/2":""}`,children:e.jsxs(g,{id:"category_id",name:"category_id",value:r.category_id,onChange:_,className:"mt-1 block w-full",required:!0,children:[e.jsx("option",{value:"0",children:"Selecciona una categoría"}),u&&u.map((a,s)=>e.jsx("option",{value:a.id,children:a.name},s))]})}),e.jsx(l,{message:o.category_id,className:"mt-2"})]}),m&&Array.isArray(m)&&m.length>0&&e.jsxs("div",{className:"flex-1",children:[e.jsx(n,{htmlFor:"subCategory_id",value:"Provincia"}),e.jsx("div",{className:"",children:e.jsxs(g,{id:"subCategory_id",name:"subCategory_id",value:r.subCategory_id,onChange:a=>t("subCategory_id",a.target.value),className:"mt-1 block w-full",required:!0,children:[e.jsx("option",{value:"",children:"Selecciona una Provincia"}),m&&m.map((a,s)=>e.jsx("option",{value:a.id,children:a.name},s))]})}),e.jsx(l,{message:o.subCategory_id,className:"mt-2"})]})]}),r.selectedType=="personaJuridica"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex gap-4 mt-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx(n,{htmlFor:"ruc",value:"RUC"}),e.jsx(i,{id:"ruc",name:"ruc",value:r.ruc,className:"mt-1 block w-full",autoComplete:"ruc",isFocused:!0,onChange:a=>t("ruc",a.target.value),required:!0}),e.jsx(l,{message:o.name,className:"mt-2"})]}),e.jsxs("div",{className:"flex-1",children:[e.jsx(n,{htmlFor:"company_name",value:"Razón Social"}),e.jsx(i,{id:"company_name",name:"company_name",value:r.company_name,className:"mt-1 block w-full",autoComplete:"company_name",onChange:a=>t("company_name",a.target.value),required:!0}),e.jsx(l,{message:o.company_name,className:"mt-2"})]})]}),e.jsx("p",{className:"text-center mt-4",children:"Persona Registrante"})]}),e.jsxs("div",{className:"flex gap-4 mt-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx(n,{htmlFor:"name",value:"Nombre(s)"}),e.jsx(i,{id:"name",name:"name",value:r.name,className:"w-full",isFocused:r.selectedType==="pNatural",autoComplete:"name",onChange:a=>t("name",a.target.value),required:!0}),e.jsx(l,{message:o.name,className:"mt-2"})]}),e.jsxs("div",{className:"flex-1",children:[e.jsx(n,{htmlFor:"last_name",value:"Apellidos"}),e.jsx(i,{id:"last_name",name:"last_name",value:r.last_name,className:"w-full",autoComplete:"last_name",onChange:a=>t("last_name",a.target.value),required:!0}),e.jsx(l,{message:o.last_name,className:"mt-2"})]})]}),e.jsxs("div",{className:"flex mt-4 gap-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx(n,{htmlFor:"dni",value:"DNI"}),e.jsx(i,{id:"dni",name:"dni",value:r.dni,className:`${r.selectedType!=="personaJuridica"?"w-1/2 pl-3":"w-full"}`,autoComplete:"dni",onChange:a=>t("dni",a.target.value),required:!0}),e.jsx(l,{message:o.dni,className:"mt-2"})]}),r.selectedType=="personaJuridica"&&e.jsxs("div",{className:"flex-1",children:[e.jsx(n,{htmlFor:"position",value:"Cargo"}),e.jsx(i,{id:"position",name:"position",value:r.position,className:"w-full",autoComplete:"position",onChange:a=>t("position",a.target.value),required:!0}),e.jsx(l,{message:o.position,className:"mt-2"})]})]}),e.jsxs("div",{className:"flex mt-4 gap-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx(n,{htmlFor:"phone_number",value:"Celular"}),e.jsx(i,{id:"phone_number",name:"phone_number",value:r.phone_number,className:"w-full",autoComplete:"phone_number",onChange:a=>t("phone_number",a.target.value),required:!0}),e.jsx(l,{message:o.phone_number,className:"mt-2"})]}),e.jsxs("div",{className:"flex-1",children:[e.jsx(n,{htmlFor:"email",value:"Correo Electrónico"}),e.jsx(i,{id:"email",type:"email",name:"email",value:r.email,className:"w-full",autoComplete:"email",onChange:a=>t("email",a.target.value),required:!0}),e.jsx(l,{message:o.email,className:"mt-2"})]})]}),e.jsxs("div",{className:"flex gap-4 mt-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx(n,{htmlFor:"password",value:"Contraseña"}),e.jsx(i,{id:"password",type:"password",name:"password",value:r.password,className:"w-full",autoComplete:"off",onChange:a=>t("password",a.target.value),required:!0}),e.jsx(l,{message:o.password,className:"mt-2"})]}),e.jsxs("div",{className:"flex-1",children:[e.jsx(n,{htmlFor:"password_confirmation",value:"Confirmar Contraseña"}),e.jsx(i,{id:"password_confirmation",type:"password",name:"password_confirmation",value:r.password_confirmation,className:"w-full",autoComplete:"off",onChange:a=>t("password_confirmation",a.target.value),required:!0}),e.jsx(l,{message:o.password_confirmation,className:"mt-2"})]})]}),e.jsxs("div",{className:"flex items-center justify-end mt-4",children:[e.jsx(S,{href:route("login"),className:"underline text-sm text-gray-600 hover:text-gray-900 rounded-md focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:"¿Ya esta registrado ?"}),e.jsx(E,{className:"ms-4",disabled:v,children:"Registrar"})]})]})]})})}export{B as default};
